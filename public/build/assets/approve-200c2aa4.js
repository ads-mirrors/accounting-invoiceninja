/**
 * Invoice Ninja (https://invoiceninja.com)
 *
 * @link https://github.com/invoiceninja/invoiceninja source repository
 *
 * @copyright Copyright (c) 2021. Invoice Ninja LLC (https://invoiceninja.com)
 *
 * @license https://www.elastic.co/licensing/elastic-license 
 */class i{constructor(e,t,s){this.shouldDisplaySignature=e,this.shouldDisplayTerms=t,this.shouldDisplayUserInput=s,this.termsAccepted=!1}submitForm(){document.getElementById("approve-form").submit()}displaySignature(){document.getElementById("displaySignatureModal").removeAttribute("style");const t=document.getElementById("signature-next-step");t&&(t.disabled=!0);const s=new SignaturePad(document.getElementById("signature-pad"),{penColor:"rgb(0, 0, 0)"});s.onEnd=()=>{t&&!s.isEmpty()&&(t.disabled=!1)},s.onBegin=()=>{t&&(t.disabled=!0)},s.clear(),this.signaturePad=s}displayTerms(){document.getElementById("displayTermsModal").removeAttribute("style")}displayInput(){document.getElementById("displayInputModal").removeAttribute("style")}hideInput(){let e=document.getElementById("displayInputModal");e.style.display="none"}handle(){const e=document.getElementById("approve-button");e&&e.addEventListener("click",()=>{if(e.disabled=!0,setTimeout(()=>{e.disabled=!1},2e3),this.shouldDisplayUserInput){this.displayInput();const t=document.getElementById("input-next-step");if(!t)return;t.addEventListener("click",()=>{const s=document.getElementById("user_input");s&&(document.querySelector('input[name="user_input"').value=s.value,this.hideInput(),this.shouldDisplaySignature&&this.shouldDisplayTerms?(this.displaySignature(),document.getElementById("signature-next-step").addEventListener("click",()=>{this.signaturePad.isEmpty()||(this.displayTerms(),document.getElementById("accept-terms-button").addEventListener("click",()=>{document.querySelector('input[name="signature"').value=this.signaturePad.toDataURL(),this.termsAccepted=!0,this.submitForm()}))})):this.shouldDisplaySignature?(this.displaySignature(),document.getElementById("signature-next-step").addEventListener("click",()=>{this.signaturePad.isEmpty()||(document.querySelector('input[name="signature"').value=this.signaturePad.toDataURL(),this.submitForm())})):this.shouldDisplayTerms?(this.displayTerms(),document.getElementById("accept-terms-button").addEventListener("click",()=>{this.termsAccepted=!0,this.submitForm()})):this.submitForm())})}else this.shouldDisplaySignature&&this.shouldDisplayTerms?(this.displaySignature(),document.getElementById("signature-next-step").addEventListener("click",()=>{this.signaturePad.isEmpty()||(this.displayTerms(),document.getElementById("accept-terms-button").addEventListener("click",()=>{document.querySelector('input[name="signature"').value=this.signaturePad.toDataURL(),this.termsAccepted=!0,this.submitForm()}))})):this.shouldDisplaySignature?(this.displaySignature(),document.getElementById("signature-next-step").addEventListener("click",()=>{this.signaturePad.isEmpty()||(document.querySelector('input[name="signature"').value=this.signaturePad.toDataURL(),this.submitForm())})):this.shouldDisplayTerms?(this.displayTerms(),document.getElementById("accept-terms-button").addEventListener("click",()=>{this.termsAccepted=!0,this.submitForm()})):this.submitForm()})}}const n=document.querySelector('meta[name="require-quote-signature"]').content,a=document.querySelector('meta[name="show-quote-terms"]').content,u=document.querySelector('meta[name="accept-user-input"]').content;new i(!!+n,!!+a,!!+u).handle();
